var Content=function(a){this.body=a.body;this.data=a.data;this.type=a.type};Content.prototype={};
Object.defineProperties(Content.prototype,{type:{get:function(){if(this._type)return this._type;if(this._data)switch(typeof this._data){case "object":return"application/json"}return"text/plain"},set:function(a){this._type=a;return this},enumerable:!0},data:{get:function(){return this._body?this.processor.parser(this._body):this._data},set:function(a){this._body&&a&&Errors.setDataWithBody(this);this._data=a;return this},enumerable:!0},body:{get:function(){return this._data?this.processor.stringify(this._data):
this._body.toString()},set:function(a){this._data&&a&&Errors.setBodyWithData(this);this._body=a;return this},enumerable:!0},processor:{get:function(){var a=Content.processors[this.type];if(a)return a;for(var b=this.type.split(";")[0].split(/\+|\//),c=0,d=b.length;c<d;c++)a=Content.processors[b[c]];return a||{parser:identity,stringify:toString}},enumerable:!0},length:{get:function(){return"undefined"!==typeof Buffer?Buffer.byteLength(this.body):this.body.length}}});Content.processors={};
Content.registerProcessor=function(a,b){a.forEach?a.forEach(function(a){Content.processors[a]=b}):Content.processors[a]=b};var identity=function(a){return a},toString=function(a){return a.toString()};Content.registerProcessor(["text/html","text/plain","text"],{parser:identity,stringify:toString});Content.registerProcessor(["application/json; charset=utf-8","application/json","json"],{parser:function(a){return JSON.parse(a)},stringify:function(a){return JSON.stringify(a)}});var qs=require("querystring");
Content.registerProcessor(["application/x-www-form-urlencoded"],{parser:qs.parse,stringify:qs.stringify});var Errors={setDataWithBody:function(a){throw Error("Attempt to set data attribute of a content object when the body attributes was already set.");},setBodyWithData:function(a){throw Error("Attempt to set body attribute of a content object when the data attributes was already set.");}};module.exports=Content;